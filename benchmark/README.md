# Performance benchmark for compressed full-text indexes

This directory contains code and scripts to evaluate
the performance of [sdsl][sdsl] index implementations.


## Methodology

We use the benchmark code and test cases form the
[Pizza&Chili](http://pizzachili.di.unipi.it) website.

## Directory structure of the project

  * bin: Contains the executables of the project.
    * `build_index_*` generates indexes
    * `count_queries_*` executes the count experiments 
    * `get_index_structure_*` outputs the space breakdown
	  of an index.
    * Subdirectories NOSSE and HP contain executables
	  which were generated by compiling without enabling
	  SSE and with forcing the use of hugepages of
	  1 GB if available on the system.
  * data: An directory for the test input. The [Pizza&Chili][pz]
          test inputs can be downloaded by calling the
          get_corpus.sh script.
  * src:  Contains the source code of the project.
  * tmp:  Contains temporary data which is generated during
          index construction (suffix array, BWT).
  * visualize: `R` and `pdflatex` scripts to generate
               reports of the collected data.
  * results: 

	Files included in this archive form the Pizza&Chili website:
	  * src/genpatterns.c
      * src/run_quries_sdsl.cpp is a adapted version of the
	    Pizza&Chili file run_queries.c .

## Prerequisites
  * For the visualization you need the following software:
    - [R][RPJ] with package `xtable`. You can install the
      package by calling `install.packages("xtable")` in R.
    - [pdflatex][LT] to generate the pdf reports.

		
## Usage

 * Populate the data directory with some test files. E.g. you
   can download the 200MB [Pizza&Chili][pz] test cases by 
   executing `./data/get_corpus.sh`. All files suffixed by 
   `[0-9][0-9]MB` are considered as test files.
 * `make timing`  compiles the programs, builds the indexes and
   runs the performance tests. The result can be found
   in the file `results/count.txt`. 
   Indexes and temporary files are stored in the
   directory `data` and `tmp`. For the 1GB of
   [Pizza&Chili][pz] data the project will produce about
   12GB of additional data.
 * Finally, you can change into the `visualize` directory and
   if you have used the [Pizza&Chili][pz] files then a call of
   `make` will produce a report of the results and store
   it in the file `count.pdf`.
 * All created indexes and test results can be deleted
   by calling `make cleanall`.

## Author

Simon Gog (simon.gog@gmail.com)

[sdsl]: https://github.com/simongog/sdsl "sdsl"
[pz]: http://pizzachili.di.unipi.it "Pizza&Chili"
[RPJ]: http://www.r-project.org/ "R"
[LT]: http://www.tug.org/applications/pdftex/ "pdflatex"
